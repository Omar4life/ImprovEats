<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImprovEats - Smart Recipe Assistant</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .ingredient-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }

        .ingredient-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .recipe-container {
            grid-column: 1 / -1;
            display: none;
        }

        .recipe-container.active {
            display: block;
        }

        .recipe-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .recipe-title {
            font-size: 2rem;
            color: #667eea;
        }

        .recipe-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .scaling-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .scaling-btn {
            background: #667eea;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .serving-display {
            font-weight: bold;
            font-size: 1.1rem;
            color: #667eea;
        }

        .recipe-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .ingredients-list, .instructions-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .ingredients-list h3, .instructions-list h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .ingredient-item, .instruction-item {
            padding: 10px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .instruction-item {
            display: block;
            position: relative;
        }

        .timer-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .timer-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        }

        .timer-display.active {
            display: block;
        }

        .timer-time {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
        }

        .timer-controls button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .share-modal.active {
            display: flex;
        }

        .share-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
        }

        .share-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .share-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
        }

        .share-btn:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .share-btn i {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .dietary-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-btn {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #e0e0e0;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .recipe-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .recipe-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .recipe-controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-utensils"></i> ImprovEats</h1>
            <p>Smart recipe assistant that helps you cook using ingredients you already have</p>
        </div>

        <div class="main-content">
            <div class="card">
                <h2><i class="fas fa-camera"></i> Scan Your Ingredients</h2>
                <textarea class="ingredient-input" id="ingredientInput" placeholder="Enter your available ingredients (e.g., chicken, rice, tomatoes, onions)"></textarea>
                
                <div class="dietary-filters">
                    <button class="filter-btn" data-filter="halal">Halal</button>
                    <button class="filter-btn" data-filter="kosher">Kosher</button>
                    <button class="filter-btn" data-filter="vegetarian">Vegetarian</button>
                    <button class="filter-btn" data-filter="vegan">Vegan</button>
                    <button class="filter-btn" data-filter="gluten-free">Gluten-Free</button>
                    <button class="filter-btn" data-filter="dairy-free">Dairy-Free</button>
                </div>
                
                <button class="btn" onclick="generateRecipe()">
                    <i class="fas fa-magic"></i> Generate Recipe
                </button>
            </div>

            <div class="card">
                <h2><i class="fas fa-lightbulb"></i> Smart Features</h2>
                <div style="text-align: center;">
                    <div style="margin-bottom: 20px;">
                        <i class="fas fa-clock" style="font-size: 3rem; color: #667eea; margin-bottom: 10px;"></i>
                        <h3>Built-in Timers</h3>
                        <p>Never overcook again with step-by-step cooking timers</p>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <i class="fas fa-share-alt" style="font-size: 3rem; color: #667eea; margin-bottom: 10px;"></i>
                        <h3>Easy Sharing</h3>
                        <p>Share your favorite recipes with friends and family</p>
                    </div>
                    <div>
                        <i class="fas fa-balance-scale" style="font-size: 3rem; color: #667eea; margin-bottom: 10px;"></i>
                        <h3>Recipe Scaling</h3>
                        <p>Adjust serving sizes automatically</p>
                    </div>
                </div>
            </div>

            <div class="card recipe-container" id="recipeContainer">
                <div class="recipe-header">
                    <h2 class="recipe-title" id="recipeTitle">Your Recipe</h2>
                    <div class="recipe-controls">
                        <button class="btn btn-secondary" onclick="shareRecipe()">
                            <i class="fas fa-share"></i> Share
                        </button>
                        <button class="btn btn-success" onclick="generateRecipe()">
                            <i class="fas fa-sync"></i> New Recipe
                        </button>
                    </div>
                </div>

                <div class="scaling-controls">
                    <span>Servings:</span>
                    <button class="scaling-btn" onclick="scaleRecipe(-1)">-</button>
                    <span class="serving-display" id="servingCount">4</span>
                    <button class="scaling-btn" onclick="scaleRecipe(1)">+</button>
                </div>

                <div class="recipe-content">
                    <div class="ingredients-list">
                        <h3><i class="fas fa-list"></i> Ingredients</h3>
                        <div id="ingredientsList"></div>
                    </div>
                    <div class="instructions-list">
                        <h3><i class="fas fa-clipboard-list"></i> Instructions</h3>
                        <div id="instructionsList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Timer Display -->
    <div class="timer-display" id="timerDisplay">
        <div class="timer-time" id="timerTime">00:00</div>
        <div class="timer-controls">
            <button onclick="pauseTimer()">Pause</button>
            <button onclick="stopTimer()">Stop</button>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="share-modal" id="shareModal">
        <div class="share-content">
            <h2>Share Recipe</h2>
            <p>Share this delicious recipe with others:</p>
            <div class="share-options">
                <a href="#" class="share-btn" onclick="shareVia('whatsapp')">
                    <i class="fab fa-whatsapp" style="color: #25D366;"></i>
                    WhatsApp
                </a>
                <a href="#" class="share-btn" onclick="shareVia('facebook')">
                    <i class="fab fa-facebook" style="color: #1877F2;"></i>
                    Facebook
                </a>
                <a href="#" class="share-btn" onclick="shareVia('twitter')">
                    <i class="fab fa-twitter" style="color: #1DA1F2;"></i>
                    Twitter
                </a>
                <a href="#" class="share-btn" onclick="shareVia('email')">
                    <i class="fas fa-envelope" style="color: #EA4335;"></i>
                    Email
                </a>
                <a href="#" class="share-btn" onclick="copyRecipe()">
                    <i class="fas fa-copy" style="color: #667eea;"></i>
                    Copy Link
                </a>
                <a href="#" class="share-btn" onclick="printRecipe()">
                    <i class="fas fa-print" style="color: #333;"></i>
                    Print
                </a>
            </div>
            <button class="btn" onclick="closeShareModal()" style="margin-top: 20px; width: 100%;">Close</button>
        </div>
    </div>

    <script>
        let currentRecipe = null;
        let currentServings = 4;
        let baseServings = 4;
        let activeTimers = new Map();
        let selectedFilters = new Set();

        // Sample recipes database
        const recipeDatabase = [
            {
                name: "Chicken Fried Rice",
                ingredients: [
                    { name: "Cooked rice", amount: 2, unit: "cups" },
                    { name: "Chicken breast", amount: 1, unit: "lb" },
                    { name: "Eggs", amount: 2, unit: "pieces" },
                    { name: "Soy sauce", amount: 3, unit: "tbsp" },
                    { name: "Vegetable oil", amount: 2, unit: "tbsp" },
                    { name: "Green onions", amount: 2, unit: "stalks" }
                ],
                instructions: [
                    { step: "Heat oil in a large pan over medium-high heat", time: 2 },
                    { step: "Cook diced chicken until golden brown", time: 8 },
                    { step: "Push chicken to one side, scramble eggs on the other", time: 3 },
                    { step: "Add rice and soy sauce, stir-fry everything together", time: 5 },
                    { step: "Garnish with chopped green onions and serve hot", time: 1 }
                ],
                tags: ["quick", "protein", "asian"]
            },
            {
                name: "Vegetable Pasta",
                ingredients: [
                    { name: "Pasta", amount: 12, unit: "oz" },
                    { name: "Olive oil", amount: 3, unit: "tbsp" },
                    { name: "Garlic", amount: 3, unit: "cloves" },
                    { name: "Bell peppers", amount: 2, unit: "pieces" },
                    { name: "Zucchini", amount: 1, unit: "piece" },
                    { name: "Cherry tomatoes", amount: 1, unit: "cup" }
                ],
                instructions: [
                    { step: "Boil pasta according to package directions", time: 10 },
                    { step: "Heat olive oil and sautÃ© garlic until fragrant", time: 2 },
                    { step: "Add bell peppers and zucchini, cook until tender", time: 6 },
                    { step: "Add cherry tomatoes and cook until softened", time: 4 },
                    { step: "Toss with drained pasta and serve", time: 2 }
                ],
                tags: ["vegetarian", "healthy", "italian"]
            },
            {
                name: "Beef Stir Fry",
                ingredients: [
                    { name: "Beef strips", amount: 1, unit: "lb" },
                    { name: "Broccoli", amount: 2, unit: "cups" },
                    { name: "Carrots", amount: 2, unit: "pieces" },
                    { name: "Soy sauce", amount: 4, unit: "tbsp" },
                    { name: "Ginger", amount: 1, unit: "tbsp" },
                    { name: "Sesame oil", amount: 1, unit: "tbsp" }
                ],
                instructions: [
                    { step: "Heat oil in wok over high heat", time: 2 },
                    { step: "Stir-fry beef until browned", time: 5 },
                    { step: "Add vegetables and stir-fry until crisp-tender", time: 6 },
                    { step: "Add sauce and ginger, toss to coat", time: 2 },
                    { step: "Serve immediately over rice", time: 1 }
                ],
                tags: ["protein", "asian", "quick"]
            }
        ];

        // Filter functionality
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const filter = this.dataset.filter;
                if (selectedFilters.has(filter)) {
                    selectedFilters.delete(filter);
                    this.classList.remove('active');
                } else {
                    selectedFilters.add(filter);
                    this.classList.add('active');
                }
            });
        });

        function generateRecipe() {
            const ingredients = document.getElementById('ingredientInput').value.toLowerCase();
            if (!ingredients.trim()) {
                alert('Please enter some ingredients first!');
                return;
            }

            // Simple recipe matching logic
            let bestMatch = recipeDatabase[0];
            let maxMatches = 0;

            recipeDatabase.forEach(recipe => {
                let matches = 0;
                recipe.ingredients.forEach(ingredient => {
                    if (ingredients.includes(ingredient.name.toLowerCase())) {
                        matches++;
                    }
                });
                if (matches > maxMatches) {
                    maxMatches = matches;
                    bestMatch = recipe;
                }
            });

            currentRecipe = JSON.parse(JSON.stringify(bestMatch)); // Deep copy
            baseServings = 4;
            currentServings = 4;
            
            displayRecipe();
        }

        function displayRecipe() {
            if (!currentRecipe) return;

            document.getElementById('recipeTitle').textContent = currentRecipe.name;
            document.getElementById('servingCount').textContent = currentServings;
            
            // Display ingredients
            const ingredientsList = document.getElementById('ingredientsList');
            ingredientsList.innerHTML = '';
            
            currentRecipe.ingredients.forEach(ingredient => {
                const scaledAmount = (ingredient.amount * currentServings / baseServings).toFixed(1);
                const div = document.createElement('div');
                div.className = 'ingredient-item';
                div.innerHTML = `
                    <span>${scaledAmount} ${ingredient.unit} ${ingredient.name}</span>
                `;
                ingredientsList.appendChild(div);
            });

            // Display instructions
            const instructionsList = document.getElementById('instructionsList');
            instructionsList.innerHTML = '';
            
            currentRecipe.instructions.forEach((instruction, index) => {
                const div = document.createElement('div');
                div.className = 'instruction-item';
                div.innerHTML = `
                    <span><strong>Step ${index + 1}:</strong> ${instruction.step}</span>
                    ${instruction.time ? `<button class="timer-btn" onclick="startTimer(${instruction.time}, 'Step ${index + 1}')">
                        <i class="fas fa-clock"></i> ${instruction.time} min
                    </button>` : ''}
                `;
                instructionsList.appendChild(div);
            });

            document.getElementById('recipeContainer').classList.add('active');
        }

        function scaleRecipe(change) {
            const newServings = currentServings + change;
            if (newServings > 0 && newServings <= 20) {
                currentServings = newServings;
                displayRecipe();
            }
        }

        // Timer functionality
        function startTimer(minutes, stepName) {
            const timerId = Date.now();
            const totalSeconds = minutes * 60;
            
            activeTimers.set(timerId, {
                remaining: totalSeconds,
                stepName: stepName,
                interval: null,
                isPaused: false
            });

            showTimer(timerId);
            runTimer(timerId);
        }

        function showTimer(timerId) {
            const timerDisplay = document.getElementById('timerDisplay');
            timerDisplay.classList.add('active');
            timerDisplay.dataset.activeTimer = timerId;
            updateTimerDisplay(timerId);
        }

        function runTimer(timerId) {
            const timer = activeTimers.get(timerId);
            if (!timer) return;

            timer.interval = setInterval(() => {
                if (timer.isPaused) return;
                
                timer.remaining--;
                updateTimerDisplay(timerId);

                if (timer.remaining <= 0) {
                    clearInterval(timer.interval);
                    timerComplete(timerId);
                }
            }, 1000);
        }

        function updateTimerDisplay(timerId) {
            const timer = activeTimers.get(timerId);
            if (!timer) return;

            const minutes = Math.floor(timer.remaining / 60);
            const seconds = timer.remaining % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timerTime').textContent = timeString;
        }

        function pauseTimer() {
            const timerId = parseInt(document.getElementById('timerDisplay').dataset.activeTimer);
            const timer = activeTimers.get(timerId);
            if (timer) {
                timer.isPaused = !timer.isPaused;
            }
        }

        function stopTimer() {
            const timerId = parseInt(document.getElementById('timerDisplay').dataset.activeTimer);
            const timer = activeTimers.get(timerId);
            if (timer) {
                clearInterval(timer.interval);
                activeTimers.delete(timerId);
                document.getElementById('timerDisplay').classList.remove('active');
            }
        }

        function timerComplete(timerId) {
            const timer = activeTimers.get(timerId);
            if (timer) {
                alert(`Timer complete for ${timer.stepName}!`);
                activeTimers.delete(timerId);
                document.getElementById('timerDisplay').classList.remove('active');
            }
        }

        // Share functionality
        function shareRecipe() {
            if (!currentRecipe) {
                alert('Please generate a recipe first!');
                return;
            }
            document.getElementById('shareModal').classList.add('active');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.remove('active');
        }

        function shareVia(platform) {
            if (!currentRecipe) return;

            const recipeText = formatRecipeForSharing();
            const encodedText = encodeURIComponent(recipeText);
            
            let url = '';
            switch(platform) {
                case 'whatsapp':
                    url = `https://wa.me/?text=${encodedText}`;
                    break;
                case 'facebook':
                    url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodedText}`;
                    break;
                case 'twitter':
                    url = `https://twitter.com/intent/tweet?text=${encodedText}`;
                    break;
                case 'email':
                    url = `mailto:?subject=Check out this recipe: ${currentRecipe.name}&body=${encodedText}`;
                    break;
            }
            
            if (url) {
                window.open(url, '_blank');
            }
            closeShareModal();
        }

        function copyRecipe() {
            const recipeText = formatRecipeForSharing();
            navigator.clipboard.writeText(recipeText).then(() => {
                alert('Recipe copied to clipboard!');
                closeShareModal();
            });
        }

        function printRecipe() {
            const recipeText = formatRecipeForSharing();
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head><title>${currentRecipe.name}</title></head>
                    <body style="font-family: Arial, sans-serif; padding: 20px;">
                        <pre style="white-space: pre-wrap;">${recipeText}</pre>
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
            closeShareModal();
        }

        function formatRecipeForSharing() {
            if (!currentRecipe) return '';

            let text = `ðŸ½ï¸ ${currentRecipe.name} (Serves ${currentServings})\n\n`;
            text += `ðŸ“‹ INGREDIENTS:\n`;
            currentRecipe.ingredients.forEach(ingredient => {
                const scaledAmount = (ingredient.amount * currentServings / baseServings).toFixed(1);
                text += `â€¢ ${scaledAmount} ${ingredient.unit} ${ingredient.name}\n`;
            });
            
            text += `\nðŸ‘¨â€ðŸ³ INSTRUCTIONS:\n`;
            currentRecipe.instructions.forEach((instruction, index) => {
                text += `${index + 1}. ${instruction.step}`;
                if (instruction.time) {
                    text += ` (${instruction.time} min)`;
                }
                text += `\n`;
            });
            
            text += `\nðŸ¤– Generated by ImprovEats - Smart Recipe Assistant`;
            return text;
        }

        // Close modal when clicking outside
        document.getElementById('shareModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeShareModal();
            }
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ImprovEats loaded successfully!');
        });
    </script>
</body>
</html>