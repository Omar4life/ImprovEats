<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImprovEats Recipe Finder</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        .login-card {
            background: rgba(200, 185, 169, 0.95);
            border-radius: 2rem;
            padding: 3rem 2.5rem;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
        }

        .login-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: #333333;
            margin-bottom: 2rem;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-input {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 1.5rem;
            background: rgba(168, 213, 186, 0.8);
            color: #333333;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .form-input::placeholder {
            color: #333333;
            opacity: 0.8;
        }

        .form-input:focus {
            outline: none;
            background: rgba(168, 213, 186, 1);
        }

        .login-btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 1.5rem;
            background: rgba(168, 213, 186, 0.8);
            color: #333333;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .login-btn:hover {
            background: rgba(168, 213, 186, 1);
        }

        .divider {
            text-align: center;
            margin: 1.5rem 0;
            color: #333333;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .google-btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 1.5rem;
            background: #f3f4f6;
            color: #374151;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-bottom: 2rem;
        }

        .google-btn:hover {
            background: #e5e7eb;
        }

        .register-link {
            text-align: center;
            color: #333333;
            font-size: 1rem;
            margin-bottom: 2rem;
        }

        .register-link a {
            color: #333333;
            text-decoration: underline;
            font-weight: 600;
        }

        .guest-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: #333333;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: color 0.2s;
        }

        .guest-link:hover {
            color: #000000;
        }

        .error-message {
            background: #fef2f2;
            color: #dc2626;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 0.875rem;
        }

        /* Original Recipe App Styles */
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .header-title h1 {
            font-size: 2.25rem;
            font-weight: bold;
            color: #ea580c;
        }

        .header-subtitle {
            color: #9a3412;
            font-size: 1.125rem;
        }

        .user-info {
            text-align: center;
            margin-bottom: 1rem;
            color: #333333;
        }

        .logout-btn {
            background: #dc2626;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            margin-left: 1rem;
        }

        .logout-btn:hover {
            background: #b91c1c;
        }

        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .input-section {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .input-wrapper svg {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem 0.75rem 0.75rem 2.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
        }

        .input-field:focus {
            outline: none;
            border-color: #8FB9CA;
            box-shadow: 0 0 0 2px rgba(143, 185, 202, 0.2);
        }

        .add-btn {
            padding: 0.75rem 1.5rem;
            background: #8FB9CA;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
            transition: background-color 0.2s;
        }

        .add-btn:hover {
            background: #7AA5B8;
        }

        .ingredients-section h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #1f2937;
        }

        .ingredients-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .ingredient-tag {
            background: #fed7aa;
            color: #ea580c;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .remove-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-btn:hover {
            background: #fb923c;
        }

        .recipes-header {
        font-size: 1.5rem;
        font-weight: bold;
        color: #ea580c;
        position: relative;
        top: -10px;
        }

        .recipe-card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            border-left: 4px solid #8FB9CA;
            transition: box-shadow 0.2s;
        }

        .recipe-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .recipe-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .recipe-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #ea580c;
        }

        .match-score {
            text-align: right;
        }

        .match-percentage {
            font-size: 1.125rem;
            font-weight: bold;
            color: #f97316;
        }

        .match-label {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .recipe-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            color: #6b7280;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
        }

        .ingredients-info {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .ingredient-line {
            font-size: 0.875rem;
        }

        .have-ingredients {
            color: #f97316;
        }

        .need-ingredients {
            color: #dc2626;
        }

        .label {
            font-weight: 500;
        }

        .no-recipes {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 0.75rem;
        }

        .no-recipes svg {
            color: #9ca3af;
            margin: 0 auto 1rem;
        }

        .no-recipes p {
            color: #6b7280;
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .no-recipes .subtitle {
            color: #9ca3af;
            font-size: 1rem;
        }

        .recipe-detail {
            max-width: 800px;
            margin: 0 auto;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #f97316;
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 1.5rem;
            padding: 0.5rem;
        }

        .back-btn:hover {
            color: #ea580c;
        }

        .recipe-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .recipe-detail-title {
            font-size: 1.875rem;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 0.5rem;
        }

        .recipe-detail-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #6b7280;
        }

        .recipe-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .ingredients-section h3,
        .instructions-section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #ea580c;
        }

        .ingredient-item {
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid;
            margin-bottom: 0.5rem;
        }

        .ingredient-have {
            background: rgba(249, 115, 22, 0.1);
            border-color: #f97316;
            color: #333333;
        }

        .ingredient-need {
            background: rgba(221, 214, 206, 0.3);
            border-color: #DDD6CE;
            color: #333333;
        }

        .ingredient-status {
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .instructions-list {
            list-style: none;
        }

        .instruction-item {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .instruction-number {
            flex-shrink: 0;
            width: 1.5rem;
            height: 1.5rem;
            background: #f97316;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .instruction-text {
            color: #333333;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .recipe-content {
                grid-template-columns: 1fr;
            }

            .input-section {
                flex-direction: column;
            }

            .recipe-header {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginView" class="login-container">
        <div class="login-card">
            <h1 class="login-title">Login</h1>

            <div id="errorMessage" class="error-message hidden"></div>

            <form class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <input type="email" id="loginEmail" class="form-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" class="form-input" placeholder="Password" required>
                </div>
                <button type="submit" class="login-btn">Login</button>
            </form>

            <div class="divider">Or...</div>



            <div class="register-link">
                Don't have an account? <a href="#" onclick="showRegister()">Register</a>
            </div>

            <a href="#" class="guest-link" onclick="continueAsGuest()">
                Continue as Guest →
            </a>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerView" class="login-container hidden">
        <div class="login-card">
            <h1 class="login-title">Register</h1>

            <div id="registerErrorMessage" class="error-message hidden"></div>

            <form class="login-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <input type="text" id="registerName" class="form-input" placeholder="Full Name" required>
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail" class="form-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" class="form-input" placeholder="Password" required>
                </div>
                <div class="form-group">
                    <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm Password" required>
                </div>
                <button type="submit" class="login-btn">Register</button>
            </form>

            <div class="divider">Or...</div>



            <div class="register-link">
                Already have an account? <a href="#" onclick="showLogin()">Login</a>
            </div>

            <a href="#" class="guest-link" onclick="continueAsGuest()">
                Continue as Guest →
            </a>
        </div>
    </div>

    <!-- Main Recipe App -->
    <div id="mainApp" class="container hidden">
        <div id="mainView">
            <div class="header">
                <div class="header-title">
                    <i data-lucide="chef-hat" style="width: 40px; height: 40px; color: #f97316;"></i>
                    <h1>ImprovEats Recipe Finder</h1>
                </div>
                <div id="userInfo" class="user-info hidden"></div>
                <p class="header-subtitle">Enter your ingredients and discover delicious recipes you can make!</p>
            </div>

            <div class="card">
                <div class="input-section">
                    <div class="input-wrapper">
                        <i data-lucide="search"></i>
                        <input 
                            type="text" 
                            id="ingredientInput" 
                            class="input-field" 
                            placeholder="Add an ingredient (e.g., chicken, tomatoes, cheese)"
                        >
                    </div>
                    <button class="add-btn" onclick="addIngredient()">
                        <i data-lucide="plus"></i>
                        Add
                    </button>
                </div>

                <div id="ingredientsSection" class="hidden">
                    <h3>Your Ingredients:</h3>
                    <div id="ingredientsList" class="ingredients-list"></div>
                </div>
            </div>

            <div>
                <h2 id="recipesHeader" class="recipes-header">All Recipes</h2>
                <div id="recipesList"></div>
            </div>
        </div>

        <div id="recipeDetailView" class="hidden">
            <button class="back-btn" onclick="showMainView()">
                ← Back to recipes
            </button>

            <div class="card recipe-detail">
                <div class="recipe-detail-header">
                    <div>
                        <h1 id="detailTitle" class="recipe-detail-title"></h1>
                        <div id="detailMeta" class="recipe-detail-meta"></div>
                    </div>
                    <div id="detailMatch" class="match-score"></div>
                </div>

                <div class="recipe-content">
                    <div class="ingredients-section">
                        <h3>Ingredients</h3>
                        <div id="detailIngredients"></div>
                    </div>

                    <div class="instructions-section">
                        <h3>Instructions</h3>
                        <ol id="detailInstructions" class="instructions-list"></ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample recipe database
        const recipes = [
            {
                id: 1,
                name: "Spaghetti Carbonara",
                ingredients: ["spaghetti", "eggs", "bacon", "parmesan cheese", "black pepper"],
                cookTime: "20 min",
                servings: 4,
                instructions: [
                    "Cook spaghetti according to package directions",
                    "Fry bacon until crispy, reserve fat",
                    "Whisk eggs with parmesan and pepper",
                    "Toss hot pasta with egg mixture and bacon",
                    "Serve immediately with extra cheese"
                ]
            },
            {
                id: 2,
                name: "Chicken Stir Fry",
                ingredients: ["chicken breast", "soy sauce", "garlic", "ginger", "vegetables", "rice"],
                cookTime: "15 min",
                servings: 3,
                instructions: [
                    "Cut chicken into bite-sized pieces",
                    "Heat oil in wok or large pan",
                    "Cook chicken until golden",
                    "Add garlic, ginger, and vegetables",
                    "Stir in soy sauce and serve over rice"
                ]
            },
            {
                id: 3,
                name: "Tomato Basil Pasta",
                ingredients: ["pasta", "tomatoes", "basil", "garlic", "olive oil", "parmesan cheese"],
                cookTime: "25 min",
                servings: 4,
                instructions: [
                    "Cook pasta according to package directions",
                    "Sauté garlic in olive oil",
                    "Add tomatoes and simmer",
                    "Toss with pasta and fresh basil",
                    "Top with parmesan cheese"
                ]
            },
            {
                id: 4,
                name: "Scrambled Eggs",
                ingredients: ["eggs", "butter", "salt", "pepper"],
                cookTime: "5 min",
                servings: 2,
                instructions: [
                    "Beat eggs with salt and pepper",
                    "Heat butter in non-stick pan",
                    "Pour in eggs and gently scramble",
                    "Remove from heat while slightly wet",
                    "Serve immediately"
                ]
            },
            {
                id: 5,
                name: "Chicken Caesar Salad",
                ingredients: ["chicken breast", "lettuce", "parmesan cheese", "croutons", "caesar dressing"],
                cookTime: "10 min",
                servings: 2,
                instructions: [
                    "Grill or pan-fry chicken breast",
                    "Chop lettuce and place in bowl",
                    "Slice chicken and add to salad",
                    "Add croutons and parmesan",
                    "Toss with caesar dressing"
                ]
            },
            {
                id: 6,
                name: "Vegetable Soup",
                ingredients: ["vegetables", "broth", "onion", "garlic", "herbs"],
                cookTime: "30 min",
                servings: 6,
                instructions: [
                    "Sauté onion and garlic",
                    "Add chopped vegetables",
                    "Pour in broth and bring to boil",
                    "Simmer until vegetables are tender",
                    "Season with herbs and serve"
                ]
            },
            {
                id: 7,
                name: "Grilled Cheese Sandwich",
                ingredients: ["bread", "cheese", "butter"],
                cookTime: "8 min",
                servings: 1,
                instructions: [
                    "Butter one side of each bread slice",
                    "Place cheese between unbuttered sides",
                    "Heat pan over medium heat",
                    "Cook sandwich until golden on both sides",
                    "Slice and serve hot"
                ]
            }
        ];

        let userIngredients = [];
        let currentRecipe = null;
        let currentUser = null;

        // Authentication functions
        function showLogin() {
            document.getElementById('loginView').classList.remove('hidden');
            document.getElementById('registerView').classList.add('hidden');
        }

        function showRegister() {
            document.getElementById('registerView').classList.remove('hidden');
            document.getElementById('loginView').classList.add('hidden');
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Simple validation - in a real app, you'd validate against a database
            if (email && password) {
                currentUser = {
                    name: email.split('@')[0],
                    email: email,
                    loginType: 'email'
                };
                showMainApp();
            } else {
                showError('errorMessage', 'Please enter valid credentials');
            }
        }

        function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                showError('registerErrorMessage', 'Passwords do not match');
                return;
            }

            if (name && email && password) {
                currentUser = {
                    name: name,
                    email: email,
                    loginType: 'email'
                };
                showMainApp();
            } else {
                showError('registerErrorMessage', 'Please fill in all fields');
            }
        }

        function loginWithGoogle() {
            // Simulate Google login
            currentUser = {
                name: 'Google User',
                email: 'user@gmail.com',
                loginType: 'google'
            };
            showMainApp();
        }

        function continueAsGuest() {
            currentUser = {
                name: 'Guest',
                email: null,
                loginType: 'guest'
            };
            showMainApp();
        }

        function logout() {
            currentUser = null;
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginView').classList.remove('hidden');
            document.getElementById('registerView').classList.add('hidden');

            // Reset app state
            userIngredients = [];
            currentRecipe = null;
            showMainView();
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
            setTimeout(() => {
                errorElement.classList.add('hidden');
            }, 5000);
        }

        function showMainApp() {
            document.getElementById('loginView').classList.add('hidden');
            document.getElementById('registerView').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');

            // Show user info if not guest
            if (currentUser && currentUser.loginType !== 'guest') {
                const userInfo = document.getElementById('userInfo');
                userInfo.innerHTML = `
                    Welcome, ${currentUser.name}!
                    <button class="logout-btn" onclick="logout()">Logout</button>
                `;
                userInfo.classList.remove('hidden');
            }

            updateDisplay();
            lucide.createIcons();
        }

        // Recipe app functions (existing code)
        function addIngredient() {
            const input = document.getElementById('ingredientInput');
            const ingredient = input.value.trim().toLowerCase();

            if (ingredient && !userIngredients.includes(ingredient)) {
                userIngredients.push(ingredient);
                input.value = '';
                updateDisplay();
            }
        }

        function removeIngredient(ingredient) {
            userIngredients = userIngredients.filter(item => item !== ingredient);
            updateDisplay();
        }

        function showRecipeDetail(recipeId) {
            const matchingRecipes = getMatchingRecipes();
            const allRecipes = userIngredients.length > 0 ? matchingRecipes : recipes;
            const recipe = allRecipes.find(r => r.id === recipeId) || recipes.find(r => r.id === recipeId);

            if (!recipe) return;

            currentRecipe = recipe;
            document.getElementById('mainView').classList.add('hidden');
            document.getElementById('recipeDetailView').classList.remove('hidden');

            document.getElementById('detailTitle').textContent = recipe.name;

            const metaHtml = `
                <div class="meta-item">
                    <i data-lucide="clock"></i>
                    <span>${recipe.cookTime}</span>
                </div>
                <div class="meta-item">
                    <i data-lucide="users"></i>
                    <span>${recipe.servings} servings</span>
                </div>
            `;
            document.getElementById('detailMeta').innerHTML = metaHtml;

            if (userIngredients.length > 0) {
                const matchHtml = `
                    <div class="match-percentage">${Math.round(recipe.matchPercentage)}%</div>
                    <div class="match-label">match</div>
                `;
                document.getElementById('detailMatch').innerHTML = matchHtml;
            } else {
                document.getElementById('detailMatch').innerHTML = '';
            }

            const ingredientsHtml = recipe.ingredients.map(ingredient => {
                const isMatched = recipe.matchedIngredients && recipe.matchedIngredients.includes(ingredient);
                const className = isMatched ? 'ingredient-have' : 'ingredient-need';
                const status = isMatched ? '✓ Have it' : 'Need to buy';
                return `
                    <div class="ingredient-item ${className}">
                        ${ingredient}
                        <span class="ingredient-status">${status}</span>
                    </div>
                `;
            }).join('');
            document.getElementById('detailIngredients').innerHTML = ingredientsHtml;

            const instructionsHtml = recipe.instructions.map((instruction, index) => `
                <li class="instruction-item">
                    <span class="instruction-number">${index + 1}</span>
                    <span class="instruction-text">${instruction}</span>
                </li>
            `).join('');
            document.getElementById('detailInstructions').innerHTML = instructionsHtml;

            lucide.createIcons();
        }

        function showMainView() {
            document.getElementById('recipeDetailView').classList.add('hidden');
            document.getElementById('mainView').classList.remove('hidden');
        }

        function getMatchingRecipes() {
            if (userIngredients.length === 0) return recipes;

            return recipes.map(recipe => {
                const matchedIngredients = recipe.ingredients.filter(recipeIngredient =>
                    userIngredients.some(userIngredient => 
                        recipeIngredient.toLowerCase().includes(userIngredient) ||
                        userIngredient.includes(recipeIngredient.toLowerCase())
                    )
                );

                const matchPercentage = (matchedIngredients.length / recipe.ingredients.length) * 100;

                return {
                    ...recipe,
                    matchedIngredients,
                    matchPercentage,
                    missingIngredients: recipe.ingredients.filter(ingredient => 
                        !matchedIngredients.includes(ingredient)
                    )
                };
            })
            .filter(recipe => recipe.matchedIngredients.length > 0)
            .sort((a, b) => b.matchPercentage - a.matchPercentage);
        }

        function updateDisplay() {
            // Update ingredients section
            const ingredientsSection = document.getElementById('ingredientsSection');
            const ingredientsList = document.getElementById('ingredientsList');

            if (userIngredients.length > 0) {
                ingredientsSection.classList.remove('hidden');
                ingredientsList.innerHTML = userIngredients.map(ingredient => `
                    <span class="ingredient-tag">
                        ${ingredient}
                        <button class="remove class="remove-btn" onclick="removeIngredient('${ingredient}')">
                            <i data-lucide="x" style="width: 14px; height: 14px;"></i>
                        </button>
                    </span>
                `).join('');
            } else {
                ingredientsSection.classList.add('hidden');
            }

            // Update recipes
            const matchingRecipes = getMatchingRecipes();
            const recipesHeader = document.getElementById('recipesHeader');
            const recipesList = document.getElementById('recipesList');

            recipesHeader.textContent = userIngredients.length > 0 ? 
                `Recipes you can make (${matchingRecipes.length})` : 'All Recipes';

            if (matchingRecipes.length === 0 && userIngredients.length > 0) {
                recipesList.innerHTML = `
                    <div class="no-recipes">
                        <i data-lucide="chef-hat" style="width: 48px; height: 48px;"></i>
                        <p>No recipes found with your current ingredients.</p>
                        <p class="subtitle">Try adding more ingredients or removing some to see more options.</p>
                    </div>
                `;
            } else {
                recipesList.innerHTML = matchingRecipes.map(recipe => {
                    const matchScore = userIngredients.length > 0 ? `
                        <div class="match-score">
                            <div class="match-percentage">${Math.round(recipe.matchPercentage)}%</div>
                            <div class="match-label">match</div>
                        </div>
                    ` : '';

                    const ingredientInfo = userIngredients.length > 0 ? `
                        <div class="ingredients-info">
                            ${recipe.matchedIngredients.length > 0 ? `
                                <div class="ingredient-line have-ingredients">
                                    <span class="label">Have: </span>${recipe.matchedIngredients.join(', ')}
                                </div>
                            ` : ''}
                            ${recipe.missingIngredients.length > 0 ? `
                                <div class="ingredient-line need-ingredients">
                                    <span class="label">Need: </span>${recipe.missingIngredients.join(', ')}
                                </div>
                            ` : ''}
                        </div>
                    ` : '';

                    return `
                        <div class="recipe-card" onclick="showRecipeDetail(${recipe.id})">
                            <div class="recipe-header">
                                <h3 class="recipe-title">${recipe.name}</h3>
                                ${matchScore}
                            </div>

                            <div class="recipe-meta">
                                <div class="meta-item">
                                    <i data-lucide="clock"></i>
                                    <span>${recipe.cookTime}</span>
                                </div>
                                <div class="meta-item">
                                    <i data-lucide="users"></i>
                                    <span>${recipe.servings} servings</span>
                                </div>
                            </div>

                            ${ingredientInfo}
                        </div>
                    `;
                }).join('');
            }

            lucide.createIcons();
        }

        // Event listeners
        document.getElementById('ingredientInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addIngredient();
            }
        });

        // Initialize - show login page first
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons()
        });
    </script>
</body>
</html>
